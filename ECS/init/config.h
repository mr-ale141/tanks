#pragma ONCE
#include <SFML/Graphics.hpp>
#include <random>
#include <iostream>
#include <string>
#include <climits>
#include <set>
#include <queue>
#include <memory>
#include "flecs.h"

unsigned LEVEL = 0;

unsigned MAX_ENEMY = 5;
unsigned MAX_ENEMY_AI = 5;
unsigned MAX_WALL_WOOD = 100;
unsigned MAX_WALL_METAL = 60;

const float SECTOR_VIEW = 0.999;
const float TIME_WAITING = 0.f;

constexpr unsigned WINDOW_WIDTH = 800;
constexpr unsigned WINDOW_HEIGHT = 600;
constexpr unsigned SIZE_TANK = 40;

constexpr unsigned ROW_COUNT = int(WINDOW_HEIGHT / SIZE_TANK);
constexpr unsigned COLUMN_COUNT = int(WINDOW_WIDTH / SIZE_TANK);
constexpr unsigned MAX_POSITION_IN_SCREEN = COLUMN_COUNT * ROW_COUNT;

constexpr unsigned NUM_POSITION_USER = 249;
constexpr unsigned NUM_POSITION_BASE_USER = 289;
constexpr unsigned COUNT_PROTECT_BASE = 5;
constexpr unsigned NUM_POSITIONS_PROTECT_BASE_USER[COUNT_PROTECT_BASE] = {288, 268, 269, 270, 290};
constexpr unsigned NUM_POSITIONS_PROTECT_BASE_ENEMY[COUNT_PROTECT_BASE] = {8, 28, 29, 30, 10};

constexpr unsigned NUM_POSITION_BASE_ENEMY = 9;

float SPEED_USER = 50.f;
float SPEED_ENEMY_AI = 40.f;
float SPEED_ENEMY = 40.f;
const sf::Vector2i RANGE_RAND_DIRECTION = {1, 4};

float SPEED_BULLET = 300.f;

float SHOOT_SPEED_USER = 2.f;
float SHOOT_SPEED_ENEMY = 1.f / 2.f;
float SHOOT_SPEED_ENEMY_AI = 1.f / 3.f;
const int HP_USER = 100;
const int HP_BASE = 1;
const int HP_ENEMY = 1;
const int HP_ENEMY_AI = 2;

const int COUNT_COLUMN_TEXTURE_FIRE = 16;
const int SIZE_TEXTURE_FIRE = 64;
const float STEP_UPDATE_FIRE = 0.05;
const int COUNT_FREE_BLOCKS_BEFORE_FIRE = 3;

constexpr int USER_DAMAGE = 1;
constexpr int ENEMY_DAMAGE = 1;
constexpr int ENEMY_AI_DAMAGE = 1;

const sf::Vector2f DIRECTIONS[4] = {
        { 0.f, -1.f },
        { 1.f, 0.f },
        { 0.f, 1.f },
        { -1.f, 0.f }
};

enum directionEnum
{
    UP,
    RIGHT,
    DOWN,
    LEFT
};

const unsigned wallWoodMaps[10][300] = {{
        300,300,300,300,300,300,300,300,8,300,10,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,28,29,30,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,106,107,108,109,110,111,112,113,300,300,300,300,300,300,
        300,300,300,300,300,300,126,127,128,129,130,131,132,133,300,300,300,300,300,300,
        140,141,142,143,144,300,146,147,148,149,150,151,152,153,300,155,156,157,158,159,
        300,300,300,300,300,300,166,167,168,169,170,171,172,173,300,300,300,300,300,300,
        300,300,300,300,300,300,186,187,188,189,190,191,192,193,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,268,269,270,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,288,300,290,300,300,300,300,300,300,300,300,300
    }, {}, {}, {}, {}, {}, {}, {}, {}, {}};

const unsigned wallMetalMaps[10][300] = {{
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,85,86,87,88,89,90,91,92,93,94,300,300,300,300,300,
        300,300,300,300,300,105,300,300,300,300,300,300,300,300,114,300,300,300,300,300,
        300,300,300,300,300,125,300,300,300,300,300,300,300,300,134,300,300,300,300,300,
        300,300,300,300,300,145,300,300,300,300,300,300,300,300,154,300,300,300,300,300,
        300,300,300,300,300,165,300,300,300,300,300,300,300,300,174,300,300,300,300,300,
        300,300,300,300,300,185,300,300,300,300,300,300,300,300,194,300,300,300,300,300,
        300,300,300,300,300,205,206,207,208,209,210,211,212,213,214,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,
        300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300,300
   }, {}, {}, {}, {}, {}, {}, {}, {}, {}};

